---
title: "Index"
author: "Mario"
date: "26/01/2023"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(dplyr)
library(ggplot2)
```

### Number of animals Seen
```{r}
data <- read.csv("data/observations_2022.csv")
head(data)
data %>%
    group_by(RTU) %>% filter(RTU != "none") %>%
    summarise(count=n())
```
### Capture Rate
```{r}

n_total <- nrow(data)
n_hit <- data %>%
  filter(animal != 0) %>%
  nrow()

percent_capture <- (n_hit/n_total)*100

n_total ###Total Photos
n_hit   ###Total Hits
percent_capture ### Percent Capture Rate
```
# Test Wildlife Insight App Accuracy
```{r}
WI <- read.csv("images_2.csv")
WI %>%
    group_by(genus) %>% filter(genus != "NA") %>%
    summarise(count=n())
head(WI)

n_total_WI <- nrow(WI)
n_hit_WI <- WI %>%
  filter(is_blank != 0) %>%   ### The WI file give blanks 1s and hits 0s
  nrow()

percent_capture_WI <- (n_hit_WI/n_total_WI)*100

n_total_WI ###Total Photos
n_hit_WI  ###Total Hits
percent_capture_WI ### Percent Capture Rate
```
1) Capture rate by hand is 22.39% and the capture rate for WI is 22.90%

```{r}
### Step 2: Compare the 2 methods to see if they return hits and misses on the same photos.
WI_filtered <- WI %>%
  select(region, site, shrub_density, plot, cam_ID, file_name, is_blank, common_name)

combined <- left_join(data, WI_filtered, by=c("region", "site", "shrub_density", "plot", "cam_ID", "file_name"))
combined <- combined%>%
  select(-tool, -behavior, -observation, -notes)

t.test(combined$animal, combined$is_blank, paired = TRUE, alternative = "two.sided")
```
2) The data between hand counting and WI seems to be worryingly different from one another.
3) Most likely it was the software not picking up animal individuals and identifying individuals when not present.

###Try combining WI data to Metadata
```{r}
df <- combined%>%
  rowwise()%>%
  mutate(difference = animal-is_blank)

df <- df %>%
  filter(common_name != "Human")

n_negative <- df %>%
  filter(difference == -1) %>% 
  nrow()

n_zero <- df %>%
  filter(difference == 0) %>% 
  nrow()

n_one <- df %>%
  filter(difference == 1) %>% 
  nrow()
```
I crossreferenced everything and the ones that WI says there are hits, I confirmed there are hits BUT the files say I didnt. Wheni go back and check my data says that i recorded it as an observation. Not sure whats going on with the data.


RATES:
Mario 22.2
WI 23.025

Differences Tallied"
-1 : 31   (After reviewing the files this number is not accurate and should be MUCH closer to 0)

0 : 1407

1 : 25       (Makes sense as the software sometimes does not properly identify animals)


```{r}
### Percent hits on cameras via human
(n_hit/n_total)*100

### Percent animals missed from WI vs visually seen
(n_one/n_hit)*100
```

# So after cleaning everything up, and running the math, WI seems to only miss 6.8% of animal photos where compared to visually processing the photos. I think this is a good tool then